To use ELBA on perlmutter, follow these steps:

    * Download prerequisites:

        $> git clone https://github.com/PASSIONLab/ELBA . && cd ELBA
        $> git clone https://github.com/PASSIONLab/CombBLAS

    * In order to compile ELBA, you have to provide the k-mer size, lower, and upper frequency
      bounds as inputs. For example, if the k-mer size was 31, the lower frequency bound 15,
      and upper frequency bound 35, you would do the following:

        $> make K=31 L=15 U=35 -j8

    * The executable is named "elba" and is found in the ELBA directory.

    * To run ELBA on a FASTA dataset named "reads.fa", first index the file with
      the command:
        $> cd YOUR_DATASET_DIR
        $> module load spack
        $> spack load samtools
        $> samtools faidx reads.fa

      You may need to run the following command prior to loading spack:
        $> module load cpu

      which will disable the gpu module. However, remember to reload the gpu module before
      running elba binary, or an error may occur during runtime.

    * ELBA must be run with a square number of processors. Suppose we want to run ELBA
      with 64 MPI tasks on a single perlmutter node. The slurm command would then be

        $> srun -N 1 -n 64 -c 2 --cpu_bind=cores ./elba reads.fa

    * Each perlmutter node has 128 cores to which we can bind each MPI tasks. Here are
      some further examples of valid slurm commands for ELBA:

        # 4 MPI tasks
        $> srun -N 1 -n 4 --cpu_bind=cores ./elba reads.fa

        # 1024 MPI tasks
        $> srun -N 8 -n 1024 -c 2 --cpu_bind=cores ./elba reads.fa

       etc.

    * Using salloc instead may be helpful when you're debugging. It help you avoid waiting
      for the queue.

        # 2 Nodes, cpu node
        $> salloc -C cpu -q interactive --nodes 2 --time 01:00:00

       etc.

      Then use the srun command as usual. You'll get ELBA running immediately.
      Remeber to tee the output to a file if you want to save the output log.


    * ELBA can also take further input parameters as follows:

        Usage: elba [options] <reads.fa>
        Options: -x INT   x-drop alignment threshold [15]
                 -A INT   matching score [1]
                 -B INT   mismatch penalty [1]
                 -G INT   gap penalty [1]
                 -o STR   output file name prefix "elba"
                 -h       help message

      An example of further parameters may be -A 1 -B 1 -x 30 -c 0.65

